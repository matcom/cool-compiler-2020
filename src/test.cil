TYPES -->

	type Object {
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

	type IO {
		method out_string:IO_out_string
		method out_int:IO_out_int
		method in_string:IO_in_string
		method in_int:IO_in_int
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

	type String {
		method length:String_length
		method concat:String_concat
		method substr:String_substr
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

	type Int {
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

	type Bool {
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

	type Main {
		attribute out:Main
		attribute testee:Main
		attribute divisor:Main
		attribute stop:Main
		attribute m:Main
		method main:Main_main
		method out_string:IO_out_string
		method out_int:IO_out_int
		method in_string:IO_in_string
		method in_int:IO_in_int
		method abort:Object_abort
		method type_name:Object_type_name
		method copy:Object_copy
	}

END <--

DATA -->

	data_0 "2 is trivially prime.\n"
	data_1 " is prime.\n"
	data_2 "halt"
	data_3 "continue"

END <--

CODE -->

	function IO_out_string {
		PARAM self
		PARAM str
		PRINT str
		RETURN self
	}

	function IO_out_int {
		PARAM self
		PARAM int
		LOCAL local_0
		ALLOC local_0 String
		TOSTR local_0 int
		PRINT local_0
		RETURN self
	}

	function IO_in_string {
		PARAM self
		LOCAL local_1
		ALLOC local_1 String
		READ local_1
		RETURN local_1
	}

	function IO_in_int {
		PARAM self
		LOCAL local_2
		ALLOC local_2 Int
		RINT local_2
		RETURN local_2
	}

	function Object_type_name {
		PARAM self
		LOCAL local_3
		ALLOC local_3 String
		TYPE local_3 self
		RETURN local_3
	}

	function Object_copy {
		PARAM self
		LOCAL local_4
		COPY local_4 self
		RETURN local_4
	}

	function String_length {
		PARAM self
		LOCAL local_5
		ALLOC local_5 Int
		STRLEN local_5 self
		RETURN local_5
	}

	function String_concat {
		PARAM self
		PARAM str
		LOCAL local_6
		ALLOC local_6 String
		STRCAT local_6 self str
		RETURN local_6
	}

	function String_substr {
		PARAM self
		PARAM from
		PARAM to
		LOCAL local_7
		ALLOC local_7 String
		STRSUB local_7 self from to
		RETURN local_7
	}

	function Object_abort {
		PARAM self
		LOCAL local_8
		ALLOC local_8 String
		TYPE local_8 self
		EXIT
	}

	function is_son {
		PARAM self
		PARAM class_s
		PARAM class_f
		LOCAL local_9
		LOCAL local_10
		LOCAL local_11
		ALLOC local_9 Bool
		ALLOC local_10 Bool
		ALLOC local_11 Int
		MOV local_11 2
		E local_9 class_s type_IO
		E local_10 class_f type_Object
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_13
		MOV local_9 1
		RETURN local_9
		LABEL label_13
		E local_9 class_s type_String
		E local_10 class_f type_Object
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_19
		MOV local_9 1
		RETURN local_9
		LABEL label_19
		E local_9 class_s type_Int
		E local_10 class_f type_Object
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_25
		MOV local_9 1
		RETURN local_9
		LABEL label_25
		E local_9 class_s type_Bool
		E local_10 class_f type_Object
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_31
		MOV local_9 1
		RETURN local_9
		LABEL label_31
		E local_9 class_s type_Main
		E local_10 class_f type_Object
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_37
		MOV local_9 1
		RETURN local_9
		LABEL label_37
		E local_9 class_s type_Main
		E local_10 class_f type_IO
		ADD local_9 local_9 local_10
		L local_9 local_9 local_11
		IF local_9 GOTO label_39
		MOV local_9 1
		RETURN local_9
		LABEL label_39
		MOV local_9 0
		RETURN local_9
	}

	function Main_main {
		PARAM self
		LOCAL local_12
		ALLOC local_12 Int
		MOV local_12 0
		RETURN local_12
	}

	function main {
		LOCAL local_13
		LOCAL local_14
		LOCAL local_15
		LOCAL local_16
		LOCAL local_17
		LOCAL local_18
		LOCAL local_19
		LOCAL local_20
		LOCAL local_21
		LOCAL local_22
		LOCAL local_23
		LOCAL local_24
		LOCAL local_25
		LOCAL local_26
		LOCAL local_27
		LOCAL local_28
		LOCAL local_29
		LOCAL local_30
		LOCAL local_31
		LOCAL local_32
		LOCAL local_33
		LOCAL local_34
		LOCAL local_35
		LOCAL local_36
		LOCAL local_37
		LOCAL local_38
		LOCAL local_39
		LOCAL local_40
		LOCAL local_41
		LOCAL local_42
		LOCAL local_43
		LOCAL local_44
		LOCAL local_45
		LOCAL local_46
		LOCAL local_47
		LOCAL local_48
		LOCAL local_49
		LOCAL local_50
		LOCAL local_51
		LOCAL local_52
		LOCAL local_53
		LOCAL local_54
		LOCAL local_55
		LOCAL local_56
		LOCAL local_57
		LOCAL local_58
		LOCAL local_59
		LOCAL local_60
		LOCAL local_61
		LOCAL local_62
		LOCAL local_63
		LOCAL local_64
		LOCAL local_65
		LOCAL local_66
		LOCAL local_67
		LOCAL local_68
		LOCAL local_69
		LOCAL local_70
		LOCAL local_71
		LOCAL local_72
		LOCAL local_73
		LOCAL local_74
		LOCAL local_75
		LOCAL local_76
		LOCAL local_77
		LOCAL local_78
		LOCAL local_79
		LOCAL local_80
		ALLOC local_13 Main
		ALLOC local_16 IO
		ALLOC local_17 String
		LDATA local_17 data_0
		LOCALSAVE
		ARG self
		ARG local_17
		ALLOC local_19 String
		TYPE local_19 local_16
		CALL local_18 local_19 out_string
		ALLOC local_20 Int
		MOV local_20 2
		SATTR local_13 out local_20
		ALLOC local_22 Int
		GATTR local_22 local_13 out
		SATTR local_13 testee local_22
		ALLOC local_23 Int
		SATTR local_13 divisor local_23
		ALLOC local_25 Int
		MOV local_25 500
		SATTR local_13 stop local_25
		ALLOC local_79 void
		LABEL label_54
		ALLOC local_27 Bool
		MOV local_27 1
		IF local_27 GOTO label_55
		GOTO label_56
		LABEL label_55
		ALLOC local_28 Int
		GATTR local_28 local_13 testee
		ALLOC local_29 Int
		MOV local_29 1
		ALLOC local_30 Int
		ADD local_30 local_28 local_29
		SATTR local_13 testee local_30
		ALLOC local_31 Int
		MOV local_31 2
		SATTR local_13 divisor local_31
		ALLOC local_54 void
		LABEL label_47
		ALLOC local_50 Bool
		ALLOC local_36 Bool
		ALLOC local_32 Int
		GATTR local_32 local_13 testee
		ALLOC local_33 Int
		GATTR local_33 local_13 divisor
		ALLOC local_34 Int
		GATTR local_34 local_13 divisor
		ALLOC local_35 Int
		Mul local_35 local_33 local_34
		L local_36 local_32 local_35
		IF local_36 GOTO label_45
		ALLOC local_49 Bool
		ALLOC local_46 Bool
		ALLOC local_38 Int
		GATTR local_38 local_13 testee
		ALLOC local_39 Int
		GATTR local_39 local_13 divisor
		ALLOC local_40 Int
		GATTR local_40 local_13 testee
		ALLOC local_41 Int
		GATTR local_41 local_13 divisor
		ALLOC local_42 Int
		Div local_42 local_40 local_41
		ALLOC local_43 Int
		Mul local_43 local_39 local_42
		ALLOC local_44 Int
		SUB local_44 local_38 local_43
		ALLOC local_45 Int
		MOV local_45 0
		E local_46 local_44 local_45
		IF local_46 GOTO label_43
		ALLOC local_48 Bool
		MOV local_48 1
		MOV local_49 local_48
		GOTO label_44
		LABEL label_43
		ALLOC local_47 Bool
		MOV local_47 0
		MOV local_49 local_47
		LABEL label_44
		MOV local_50 local_49
		GOTO label_46
		LABEL label_45
		ALLOC local_37 Bool
		MOV local_37 0
		MOV local_50 local_37
		LABEL label_46
		IF local_50 GOTO label_48
		GOTO label_49
		LABEL label_48
		ALLOC local_51 Int
		GATTR local_51 local_13 divisor
		ALLOC local_52 Int
		MOV local_52 1
		ALLOC local_53 Int
		ADD local_53 local_51 local_52
		SATTR local_13 divisor local_53
		GOTO label_47
		LABEL label_49
		ALLOC local_70 Bool
		ALLOC local_59 Bool
		ALLOC local_55 Int
		GATTR local_55 local_13 testee
		ALLOC local_56 Int
		GATTR local_56 local_13 divisor
		ALLOC local_57 Int
		GATTR local_57 local_13 divisor
		ALLOC local_58 Int
		Mul local_58 local_56 local_57
		L local_59 local_55 local_58
		IF local_59 GOTO label_50
		ALLOC local_69 Int
		MOV local_69 0
		MOV local_70 local_69
		GOTO label_51
		LABEL label_50
		ALLOC local_60 Int
		GATTR local_60 local_13 testee
		SATTR local_13 out local_60
		ALLOC local_61 IO
		ALLOC local_62 Int
		GATTR local_62 local_13 out
		LOCALSAVE
		ARG self
		ARG local_62
		ALLOC local_64 String
		TYPE local_64 local_61
		CALL local_63 local_64 out_int
		ALLOC local_65 IO
		ALLOC local_66 String
		LDATA local_66 data_1
		LOCALSAVE
		ARG self
		ARG local_66
		ALLOC local_68 String
		TYPE local_68 local_65
		CALL local_67 local_68 out_string
		MOV local_70 local_67
		LABEL label_51
		ALLOC local_78 Bool
		ALLOC local_73 Bool
		ALLOC local_71 Int
		GATTR local_71 local_13 stop
		ALLOC local_72 Int
		GATTR local_72 local_13 testee
		LE local_73 local_71 local_72
		IF local_73 GOTO label_52
		ALLOC local_77 String
		LDATA local_77 data_3
		MOV local_78 local_77
		GOTO label_53
		LABEL label_52
		ALLOC local_74 String
		LDATA local_74 data_2
		LOCALSAVE
		ARG local_74
		ALLOC local_76 String
		TYPE local_76 local_74
		CALL local_75 local_76 abort
		MOV local_78 local_75
		LABEL label_53
		GOTO label_54
		LABEL label_56
		SATTR local_13 m local_79
		LOCALSAVE
		ARG local_13
		ALLOC local_80 String
		SETSTR local_80 Main
		CALL local_14 local_80 main
	}

END <--